/**
 * Chat Juicer CSS Entry Point
 *
 * Modular CSS architecture using Tailwind v4.
 * Files are organized by concern and imported in cascade order.
 */

/* Tailwind base import */
@import "tailwindcss";

/* ============================================================
 * THEME - Color tokens and design system
 * ============================================================ */
@import "./styles/theme.css";

/* ============================================================
 * BASE LAYER - Resets, defaults, global styles
 * ============================================================ */
@import "./styles/base.css";
@import "./styles/utilities/animations.css";
@import "./styles/utilities/accessibility.css";

/* ============================================================
 * PLATFORM - OS-specific styles
 * ============================================================ */
@import "./styles/platform/macos.css";
@import "./styles/platform/windows.css";

/* ============================================================
 * COMPONENTS - UI building blocks
 * ============================================================ */
@import "./styles/components/scrollbars.css";
@import "./styles/components/sessions.css";
@import "./styles/components/function-cards.css";
@import "./styles/components/files.css";
@import "./styles/components/thumbnails.css";
@import "./styles/components/model-selector.css";
@import "./styles/components/mcp-toggles.css";
@import "./styles/components/welcome.css";
@import "./styles/components/chat.css";

/* ============================================================
 * UTILITIES - Typography and prose overrides
 * ============================================================ */
@import "./styles/utilities/typography.css";
@import "./styles/utilities/skeletons.css";

/* ============================================================
 * REMAINING LEGACY STYLES
 * These are styles not yet extracted to separate files
 * ============================================================ */

@layer components {

    /* ==========================================
   * PANEL ALIGNMENT: Ensure full-height panels align properly
   * ========================================== */
    body:has(.custom-titlebar) #sidebar>button:first-of-type {
        margin-top: 44px;
    }

    body:has(.custom-titlebar) #files-panel>div:first-child {
        margin-top: 32px;
    }

    #chat-container {
        overflow-anchor: auto;
    }

    /* ==========================================
   * ACCESSIBILITY: Screen reader only elements
   * ========================================== */
    .sr-only {
        @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap;
        border: 0;
        clip: rect(0, 0, 0, 0);
    }

    /* ==========================================
   * PARTIAL RESPONSE INDICATOR
   * ========================================== */
    .message-partial {
        position: relative;
        padding-left: 12px;
    }

    .message-partial .message-content::after {
        content: " [interrupted]";
        color: var(--color-text-secondary);
        font-style: italic;
        font-size: 0.85em;
        opacity: 0.8;
    }

    .message-partial::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 3px;
        background: var(--color-status-warning);
        border-radius: 2px;
    }

    /* ==========================================
   * VIEW DISPLAY TOGGLING
   * ========================================== */
    body.view-welcome .chat-panel,
    body.view-welcome .files-panel,
    body.view-welcome #files-toggle-wrapper,
    body.view-welcome #files-panel-toggle-wrapper {
        display: none;
    }

    body.view-chat .welcome-container {
        display: none;
    }

    /* Code input section */
    .code-input-section .code-input-display {
        @apply font-mono text-sm rounded-md p-4 max-h-[400px] overflow-y-auto overflow-x-auto;
        background: var(--color-surface-3);
        line-height: 1.5;
    }

    .code-input-display code.shiki {
        background: transparent;
        padding: 0;
    }
}

/* Background colors for welcome vs chat view - Using @theme utilities */
html,
body.view-welcome {
    @apply bg-body-welcome;
}

html,
body.view-chat {
    @apply bg-body-chat;
}
