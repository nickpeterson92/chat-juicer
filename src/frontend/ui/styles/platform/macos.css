/**
 * macOS Platform Styles
 *
 * Window drag handles and traffic light button compatibility.
 * Only active on macOS (hidden when custom titlebar is present).
 */

@layer components {

    /* ==========================================
   * macOS window dragging
   * ========================================== */
    .macos-drag-handle {
        -webkit-app-region: drag;
        position: fixed;
        top: 0;
        left: 260px;
        /* Exclude sidebar when expanded */
        right: 420px;
        /* Exclude file panel when expanded */
        height: 32px;
        z-index: 10000;
        background: transparent;
        pointer-events: auto;
    }

    /* Extend drag handle when sidebar is collapsed */
    body:has(#sidebar.collapsed) .macos-drag-handle {
        left: 0;
    }

    /* Extend drag handle when file panel is collapsed */
    body:has(#files-panel.collapsed) .macos-drag-handle {
        right: 0;
    }

    /* Hide on Windows/Linux where custom titlebar is used */
    body:has(.custom-titlebar) .macos-drag-handle {
        display: none;
    }

    /* Exclude interactive elements from drag region */
    #sidebar-toggle,
    #settings-btn,
    #logout-btn,
    #open-files-btn,
    #header-session-display,
    #files-panel>div:first-child {
        -webkit-app-region: no-drag;
        position: relative;
        z-index: 10001;
    }
}
