/**
 * Chat & Message Component Styles
 *
 * Chat container, input section, message bubbles,
 * and queued messages.
 */

@layer components {

  /* Chat page input container */
  .chat-input-section {
    @apply w-full flex flex-col gap-3 rounded-3xl py-5 px-6 transition-all;
    background-color: var(--color-surface-1);
    border: 1px solid var(--color-border-secondary);
  }

  .chat-input-section:focus-within {
    border-color: var(--color-border-focus);
  }

  /* Compact variant for chat page - minimal padding */
  .chat-input-section.compact {
    @apply gap-0 py-1 px-2 rounded-lg;
    background-color: var(--color-surface-2);
  }

  /* =========================================
   * SIBLING ARCHITECTURE (Files & Input Decoupled)
   * ========================================= */

  /* Send button streaming state - keep blue, show stop icon */
  #send-btn.streaming {
    cursor: pointer;
    position: relative;
  }

  /* Hide the arrow SVG when streaming */
  #send-btn.streaming svg {
    display: none;
  }

  /* Stop square icon centered (no circle) */
  #send-btn.streaming::after {
    content: "";
    position: absolute;
    width: 8px;
    height: 8px;
    background-color: currentColor;
    border-radius: 1px;
  }

  /* Stopping state - reduced opacity while interrupt processes */
  #send-btn.stopping {
    opacity: 0.6;
    cursor: not-allowed;
  }

  /* ==========================================
   * MESSAGE QUEUE FEATURE
   * Styles for queued messages while agent is processing
   * ========================================== */

  /* Queue count badge on send button area */
  .queue-count-badge {
    @apply absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 text-[10px] font-bold rounded-full flex items-center justify-center;
    background-color: var(--color-brand-primary);
    color: var(--color-text-user);
    animation: queueBadgePop 0.2s ease-out;
  }

  @keyframes queueBadgePop {
    0% {
      transform: scale(0);
      opacity: 0;
    }

    50% {
      transform: scale(1.2);
    }

    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Queued message card styling */
  .queued-message {
    animation: queuedMessageSlideIn 0.2s ease-out;
  }

  @keyframes queuedMessageSlideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Queued message removal animation (slide up) */
  .queued-message.removing {
    animation: queuedMessageSlideOut 0.15s ease-in forwards;
  }

  @keyframes queuedMessageSlideOut {
    from {
      opacity: 1;
      transform: translateY(0);
    }

    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  }

  /* Queued message cancel animation (elegant slide/fade left to right) */
  .queued-message.queue-cancel-animate {
    animation: queueCancelSlide 0.3s ease-out forwards;
    pointer-events: none;
  }

  @keyframes queueCancelSlide {
    0% {
      opacity: 1;
      transform: translateX(0);
    }

    100% {
      opacity: 0;
      transform: translateX(100px);
    }
  }

  /* Queued message card hover state */
  .queued-message-card:hover {
    opacity: 0.85;
  }

  /* Edit mode styling for queued message */
  .queued-message-card.editing {
    opacity: 1;
    border-style: solid;
    border-color: var(--color-brand-primary);
  }

  .welcome-content {
    @apply max-w-[720px] w-full px-8 pt-8 pb-12 flex flex-col items-center gap-8 translate-y-[4vh];
  }
}
