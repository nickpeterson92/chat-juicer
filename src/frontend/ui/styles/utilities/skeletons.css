/**
 * Skeleton Loaders & Loading States
 *
 * Loading placeholders for sessions, messages, files, and other components.
 */

@layer components {

    /* Base skeleton style */
    .skeleton {
        background: linear-gradient(90deg,
                var(--color-surface-2) 25%,
                var(--color-surface-3) 50%,
                var(--color-surface-2) 75%);
        background-size: 200% 100%;
        animation: skeleton-shimmer 1.5s infinite;
        border-radius: 8px;
    }

    @keyframes skeleton-shimmer {
        0% {
            background-position: 200% 0;
        }

        100% {
            background-position: -200% 0;
        }
    }

    /* Chat message skeletons */
    .skeleton-message {
        @apply flex gap-3 mb-4;
    }

    .skeleton-message-avatar {
        @apply w-8 h-8 rounded-full flex-shrink-0;
        background: linear-gradient(90deg,
                var(--color-surface-2) 25%,
                var(--color-surface-3) 50%,
                var(--color-surface-2) 75%);
        background-size: 200% 100%;
        animation: skeleton-shimmer 1.5s infinite;
    }

    .skeleton-message-content {
        @apply flex flex-col gap-2 flex-1;
    }

    .skeleton-message-line {
        @apply h-4;
        background: linear-gradient(90deg,
                var(--color-surface-2) 25%,
                var(--color-surface-3) 50%,
                var(--color-surface-2) 75%);
        background-size: 200% 100%;
        animation: skeleton-shimmer 1.5s infinite;
        border-radius: 8px;
    }

    .skeleton-message-line.short {
        width: 60%;
    }

    .skeleton-message-line.medium {
        width: 80%;
    }

    .skeleton-message-line.long {
        width: 95%;
    }

    /* User message skeleton (right aligned) */
    .skeleton-message.user {
        @apply flex-row-reverse;
    }

    .skeleton-message.user .skeleton-message-content {
        @apply items-end;
    }

    /* Chat container skeleton */
    .chat-skeleton {
        @apply flex flex-col gap-4 p-6;
    }

    /* File panel skeletons */
    .skeleton-file-grid {
        @apply grid gap-3 p-4;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    }

    .skeleton-file-card {
        @apply aspect-square rounded-lg;
        background: linear-gradient(90deg,
                var(--color-surface-2) 25%,
                var(--color-surface-3) 50%,
                var(--color-surface-2) 75%);
        background-size: 200% 100%;
        animation: skeleton-shimmer 1.5s infinite;
    }

    /* Session loading overlay */
    .session-loading {
        @apply absolute inset-0 flex items-center justify-center z-10;
        background-color: var(--color-surface-1);
    }

    .session-loading-spinner {
        @apply w-8 h-8 rounded-full border-2;
        border-color: var(--color-border-secondary);
        border-top-color: var(--color-brand-primary);
        animation: skeleton-spin 0.8s linear infinite;
    }

    @keyframes skeleton-spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* Updated welcome-files-list for grid mode */
    .welcome-files-list.thumbnail-mode {
        @apply p-2 max-h-[320px];
        background-color: transparent;
        border: none;
    }

    /* User message bubble gradient */
    .bg-user-gradient {
        background: var(--color-brand-gradient);
    }

    /* Toast notifications */
    .toast {
        @apply py-3.5 px-5 rounded-xl text-sm font-medium pointer-events-auto backdrop-blur-[10px] min-w-[200px] max-w-[400px];
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        word-wrap: break-word;
    }

    .animate-fadeOut {
        animation: fadeOut 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    .animate-slideIn {
        animation: slideIn 0.3s ease-out;
    }

    .toast-pulse {
        animation: toast-pulse 0.2s ease-in-out;
    }

    @keyframes fadeOut {
        from {
            opacity: 1;
            transform: translateY(0);
        }

        to {
            opacity: 0;
            transform: translateY(-10px);
        }
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes toast-pulse {

        0%,
        100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.02);
        }
    }
}
